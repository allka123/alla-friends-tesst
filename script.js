// ================== –î–û–°–¢–£–ü ==================
const CORRECT_LOGIN = "chosenone";
const CORRECT_PASS  = "kabachok2026";

// ================== –ù–ê–°–¢–†–û–ô–ö–ò –ò–ì–†–´ ==================
const MAX_ROUNDS = 100;
let round = 0; // –í–°–ï–ì–î–ê –° –ù–£–õ–Ø

// ================== 50 –ü–†–ï–î–ú–ï–¢–û–í (–¢–ï–ö–°–¢ + –≠–ú–û–î–ñ–ò) ==================
const items = [
  ["–±–∞–Ω–∫—É –∫–∞–±–∞—á–∫–æ–≤–æ–π –∏–∫—Ä—ã", "ü´ô"],
  ["—Ç–∞–ø–æ–∫ –ê–ª–ª—ã", "ü•ø"],
  ["—Ç—É—Ö–ª—ã–π –∫–∞–±–∞—á–æ–∫", "ü§¢"],
  ["–ø–æ–≤–µ—Å—Ç–∫—É –≤ –∞—Ä–º–∏—é", "üìÑ"],
  ["–æ–¥–∏–Ω –Ω–æ—Å–æ–∫", "üß¶"],
  ["—á–µ–∫ –±–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç–∞", "üßæ"],
  ["–∫–ª—é—á –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –æ—Ç —á–µ–≥–æ", "üîë"],
  ["–ø—É—Å—Ç—É—é –∫–æ—Ä–æ–±–∫—É", "üì¶"],
  ["—Å—Ç–∞—Ä—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω", "üì±"],
  ["–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é —Ñ–ª–µ—à–∫—É", "üíæ"],

  ["–ø–æ—Ä–≤–∞–Ω–Ω—ã–π –ø–∞–∫–µ—Ç", "üõçÔ∏è"],
  ["—Å–ª–æ–º–∞–Ω–Ω—ã–π –∑–æ–Ω—Ç", "üåÇ"],
  ["–∫–∞—Ä–∞–Ω–¥–∞—à –±–µ–∑ –≥—Ä–∏—Ñ–µ–ª—è", "‚úèÔ∏è"],
  ["–ø—É—Å—Ç—É—é –∫—Ä—É–∂–∫—É", "‚òï"],
  ["–≥—Ä—è–∑–Ω—É—é —Ç–∞—Ä–µ–ª–∫—É", "üçΩÔ∏è"],
  ["–ø—É–ª—å—Ç –±–µ–∑ –±–∞—Ç–∞—Ä–µ–µ–∫", "üì∫"],
  ["—á—É–∂—É—é –∑–∞—Ä—è–¥–∫—É", "üîå"],
  ["–æ–±—Ä—ã–≤–æ–∫ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏", "üìÑ"],
  ["—Å—Ç–∞—Ä—ã–π –±—É–¥–∏–ª—å–Ω–∏–∫", "‚è∞"],
  ["–æ–¥–Ω—É –ø–µ—Ä—á–∞—Ç–∫—É", "üß§"],

  ["–ø–∞–∫–µ—Ç —Å –ø–∞–∫–µ—Ç–∞–º–∏", "üëú"],
  ["—Å–ª–æ–º–∞–Ω–Ω—ã–µ –Ω–∞—É—à–Ω–∏–∫–∏", "üéß"],
  ["–ø–ª–∞—Å—Ç–∏–∫–æ–≤—É—é –≤–∏–ª–∫—É", "üç¥"],
  ["–º—è—Ç—É—é —Å–∞–ª—Ñ–µ—Ç–∫—É", "üßª"],
  ["—á–µ–∫ —Ç—Ä—ë—Ö–ª–µ—Ç–Ω–µ–π –¥–∞–≤–Ω–æ—Å—Ç–∏", "üßæ"],
  ["–±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–π –∫—É–ø–æ–Ω", "üè∑Ô∏è"],
  ["—Å–ª–æ–º–∞–Ω–Ω—ã–π USB-–∫–∞–±–µ–ª—å", "üîå"],
  ["—Å—Ç–∞—Ä—ã–π –ø—Ä–æ–ø—É—Å–∫", "ü™™"],
  ["–ø—ã–ª—å–Ω—ã–π –±—Ä–µ–ª–æ–∫", "üîë"],
  ["–ø—É—Å—Ç–æ–π –∫–æ—à–µ–ª—ë–∫", "üëõ"],

  ["–Ω–µ–Ω—É–∂–Ω—É—é –±—É–º–∞–∂–∫—É", "üìÑ"],
  ["—Å—Ç—Ä–∞–Ω–Ω—ã–π –±–æ–ª—Ç", "üî©"],
  ["–∫—Ä—ã—à–∫—É –±–µ–∑ –±–∞–Ω–∫–∏", "ü´ô"],
  ["–ø–ª–∞—Å—Ç–∏–∫–æ–≤—É—é –∫–∞—Ä—Ç—É", "üí≥"],
  ["—Å—Ç–∞—Ä—ã–π CD-–¥–∏—Å–∫", "üíø"],
  ["–Ω–µ–ø–æ–Ω—è—Ç–Ω—É—é –∫–Ω–æ–ø–∫—É", "üîò"],
  ["–ø–æ—Ç–µ—Ä—è–Ω–Ω—É—é –º–µ–ª–æ—á—å", "ü™ô"],
  ["—á—É–∂–æ–π –±–∏–ª–µ—Ç", "üéüÔ∏è"],
  ["–ª–∏—Å—Ç –±–µ–∑ —Ç–µ–∫—Å—Ç–∞", "üìÉ"],
  ["–ø–∞–∫–µ—Ç–∏–∫ —Å –≤–æ–∑–¥—É—Ö–æ–º", "üì¶"],

  ["—Å–ª–æ–º–∞–Ω–Ω—ã–π –∑–∞–º–æ–∫", "üîí"],
  ["—á—É–∂—É—é —Ä—É—á–∫—É", "üñäÔ∏è"],
  ["–ø—É—Å—Ç—É—é —Ñ–ª–µ—à–∫—É", "üíæ"],
  ["—Å—Ç–∞—Ä—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å", "üìÖ"],
  ["—Ä–∂–∞–≤—ã–π –≥–≤–æ–∑–¥—å", "üìå"]
];

// ================== –ì–ê–†–ê–ù–¢–ò–Ø –°–ö–†–´–¢–ò–Ø –ú–û–î–ê–õ–ö–ò ==================
window.onload = () => {
  if (typeof modal !== "undefined") {
    modal.classList.add("hidden");
  }
};

// ================== –õ–û–ì–ò–ö–ê ==================

function auth() {
  if (
    loginInput.value === CORRECT_LOGIN &&
    passInput.value === CORRECT_PASS
  ) {
    round = 0;                 // üî• –û–ë–ù–£–õ–Ø–ï–ú –ü–†–ò –ö–ê–ñ–î–û–ú –í–•–û–î–ï
    updateUI();

    login.classList.add("hidden");
    game.classList.remove("hidden");

    buildField();
  } else {
    error.innerText = "‚ùå –î–æ—Å—Ç—É–ø –æ—Ç–∫–ª–æ–Ω—ë–Ω. –ö–∞–±–∞—á–∫–∏ –ø—Ä–æ—Ç–∏–≤.";
  }
}

function buildField() {
  field.innerHTML = "";
  for (let i = 0; i < 30; i++) {
    const div = document.createElement("div");
    div.className = "kabachok";
    div.textContent = "ü•í";
    div.style.fontSize = "48px";
    div.onclick = pick;
    field.appendChild(div);
  }
}

function pick() {
  if (round >= MAX_ROUNDS) return;

  round++;
  updateUI();

  // —Ñ–∏–Ω–∞–ª
  if (round >= MAX_ROUNDS) {
    showModal(
      "‚ùå –ó–∞ 100 —Ä–∞—É–Ω–¥–æ–≤ —Ç—ã –Ω–µ –Ω–∞—à—ë–ª –∑–æ–ª–æ—Ç–æ–π –∫–∞–±–∞—á–æ–∫.\n–ê–ª–ª–∞ –Ω–µ –ø—Ä–∏–º–µ—Ç —Ç–µ–±—è –≤ –¥—Ä—É–∑—å—è.",
      "ü•í"
    );
    return;
  }

  const item = items[Math.floor(Math.random() * items.length)];
  showModal(
    "–¢—ã –Ω–µ –Ω–∞—à—ë–ª –∑–æ–ª–æ—Ç–æ–π –∫–∞–±–∞—á–æ–∫,\n–Ω–æ —Ç—ã –Ω–∞—à—ë–ª " + item[0] + ".",
    item[1]
  );
}

function updateUI() {
  roundText.innerText = `–†–∞—É–Ω–¥: ${round} / ${MAX_ROUNDS}`;
}

function showModal(text, emoji) {
  modal.classList.remove("hidden");
  modalText.innerText = emoji + "\n\n" + text;
}

function closeModal() {
  modal.classList.add("hidden");
}
